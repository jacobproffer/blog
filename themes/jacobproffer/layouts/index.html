{{ define "title" }}
  {{ .Site.Title }} - Blog
{{ end }}

{{ define "main" }}

{{ $src := resources.Get "/images/background.jpg" }}
{{ $smallw := default "375x webp" }}
{{ $mediumw := default "600x webp" }}
{{ $largew := default "1200x webp" }}

{{ $data := newScratch }}
{{ $data.Set "small" ($src.Resize $smallw) }}
{{ $data.Set "medium" ($src.Resize $mediumw) }}
{{ $data.Set "large" ($src.Resize $largew) }}

{{ $small := $data.Get "small" }}
{{ $medium := $data.Get "medium" }}
{{ $large := $data.Get "large" }}

{{ $paginator := .Paginate (where .Site.RegularPages ".Params.type" "!=" "page") }}

  <main>

    <section class="hero hero-top-spacing gsap-fade-in">
      <div class="hero__image-wrap">

        <h1 class="visually-hide">My Name is Jacob Proffer</h1>

        {{ partial "jacob-proffer" }}

      </div>

      <div class="hero__graphic-wrap">

        <picture>
          <source media="(max-width: 480px)" srcset="{{with $small.RelPermalink }}{{.}}{{ end }}">

          <source media="(max-width: 580px)" srcset="{{with $medium.RelPermalink }}{{.}}{{ end }}">

          <source media="(min-width: 1080px)" srcset="{{with $large.RelPermalink }}{{.}}{{ end }}">

          <img
            class="hero__graphic"
            src="{{ $src.RelPermalink }}"
            width="{{ $src.Width }}"
            height="{{ $src.Height }}"
            alt=""
          >
        </picture>

      </div>
    </section>

    <section>

      <div class="container">

        <h2 class="list__headline gsap-fade-in">Latest Posts</h2>

        <ul class="unstyled-list list grid">

          {{ range $index, $page := $paginator.Pages }}

            <li class="list__item grid relative">

              {{ .Render "article" }}

            </li>

          {{ end }}

        </ul>

      </div>

      {{ if gt (len $paginator.Pagers) 1  }}

        <nav aria-label="pagination">
          <ul class="unstyled-list pagination gsap-stagger-in">

            {{ range $paginator.Pagers }}

              {{ if eq . $paginator}}
                <li class="pagination__item flex-center" aria-current="page">
                  <span class="visually-hide">Page</span>
                  {{ .PageNumber }}
                </li>
              {{ else }}
                <li class="pagination__item flex-center">
                  <a
                    class="pagination__link link-hover flex-center"
                    href="{{ .URL }}"
                    aria-label="Go to page {{ .PageNumber }}."
                  >
                    {{ .PageNumber }}
                  </a>
                </li>
              {{ end }}

            {{ end }}

          </ul>
        </nav>

      {{ end }}

    </section>

  </main>

{{ end }}

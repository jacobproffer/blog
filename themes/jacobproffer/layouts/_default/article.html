{{ $thumbnail := "" }}

{{ if isset .Params "thumbnail" }}

  {{ $thumbnail = .Params.thumbnail }}

{{ else }}

  {{ $thumbnail = "/images/background.jpg" }}

{{ end }}

{{ $thumbnailSrc := resources.Get $thumbnail }}

{{ $smallw := default "300x webp" }}
{{ $mediumw := default "600x webp" }}
{{ $largew := default "1200x webp" }}

{{ $data := newScratch }}
{{ $data.Set "small" ($thumbnailSrc.Resize $smallw) }}
{{ $data.Set "medium" ($thumbnailSrc.Resize $mediumw) }}
{{ $data.Set "large" ($thumbnailSrc.Resize $largew) }}

{{ $small := $data.Get "small" }}
{{ $medium := $data.Get "medium" }}
{{ $large := $data.Get "large" }}

<article class="article grid relative gsap-fade-in">

  <div class="article__copy">

    <div class="relative grid">

      <h3 class="article__headline">{{ .Title }}</h3>

      {{ if isset .Params "categories" }}

        <div class="article__type">
          <span class="font-14">{{ .Type | title }}</span>
        </div>

      {{ end }}

    </div>

  </div>

  {{ if isset .Params "images" }}

    <div class="article__thumbnail">

      <div class="content bg-black">

        <picture>
          <source media="(max-width: 375px)" srcset="{{with $small.RelPermalink }}{{.}}{{ end }}">

          <source media="(max-width: 1280px)" srcset="{{with $medium.RelPermalink }}{{.}}{{ end }}">

          <source media="(min-width: 1440px)" srcset="{{with $large.RelPermalink }}{{.}}{{ end }}">

          <img
            class="article__thumbnail-image"
            src="{{ $thumbnailSrc.RelPermalink }}"
            width="{{ $thumbnailSrc.Width }}"
            height="{{ $thumbnailSrc.Height }}"
            alt=""
            loading="lazy"
          >
        </picture>

      </div>

    </div>

  {{ end }}

  <a class="article__link absolute-link" href="{{ .Permalink }}" aria-label="View {{ .Title }}"></a>

</article>

{{ define "title" }}
  {{ .Title }} - {{ .Site.Title }}
{{ end }}

{{ define "main" }}

  <main
    id="content"
    tabindex="-1"
  >

    <article class="single bottom-spacing">

      <div class="hero-top-spacing">
        <div class="container gsap-fade-in">
          <div class="single__container">
            <div class="single__content-grid">

              <h1>{{ .Title }}</h1>

            </div>
          </div>
        </div>
      </div>

      {{ partial "single/thumbnail" . }}

      <div class="container gsap-fade-in">

        <div class="single__container">

          <div class="single__content-grid">

            <time
              class="visually-hide"
              datetime="{{ .PublishDate.Format "2006-01-02" }}"
            >
              {{ .PublishDate.Format "January 2, 2006" }}
            </time>

            {{ .Content }}

            <footer class="single__footer grid">

              {{ $taxonomy := "tags" }}

              {{ with .Param $taxonomy }}

                <div class="single__footer-item grid">

                  <h2 class="no-margin" id="tag-headline">Tags</h2>

                  <ol
                    class="unstyled-list flex single__tags-list"
                    aria-labelledby="tag-headline"
                  >

                    {{ range  $index, $tag := (. | sort) }}

                      {{ with $.Site.GetPage (printf "/%s/%s" $taxonomy $tag) -}}

                        <li>

                          {{ if $index }}
                          ,
                          {{ end }}

                          <a
                            href="{{ .Permalink }}"
                            rel="tag"
                          >

                            {{ $tag | urlize }}

                          </a>

                        </li>

                      {{ end }}

                    {{ end }}

                  </ol>

                </div>

              {{ end }}

              {{ $seriesTaxonomy := "series" }}

              {{ with .Param $seriesTaxonomy }}

                <div class="single__footer-item grid">

                  <h2 class="no-margin" id="series-headline">
                    Series
                  </h2>

                  <ol
                    class="unstyled-list flex singles__tags-list"
                    aria-labelledby="series-headline"
                  >

                    {{ range  $index, $series := (. | sort) }}

                      {{ with $.Site.GetPage (printf "/%s/%s" $seriesTaxonomy ( $series | urlize )) }}

                        <li>

                          {{ if $index }}
                            ,
                          {{ end }}

                          <a
                            href="{{ .Permalink }}"
                          >

                            {{ $series }}

                          </a>

                        </li>

                      {{ end }}

                    {{ end }}

                  </ol>

                </div>

              {{ end }}

              {{ if or .PrevInSection .NextInSection }}

                <div class="single__footer-item grid">

                  <h2 class="no-margin" id="other-posts-headline">Other Posts</h2>

                  <div
                    class="other-posts flex relative"
                    role="region"
                    aria-labelledby="other-posts-headline"
                  >

                    {{ with .PrevInSection }}

                      <a
                        class="other-posts__item other-posts__item--prev"
                        href="{{ .Permalink }}"
                        rel="prev"
                      >
                        {{ .Title }}
                      </a>

                    {{ end }}

                    {{ with .NextInSection }}

                      <a
                        class="other-posts__item other-posts__item--next"
                        href="{{ .Permalink }}"
                        rel="next"
                      >
                        {{ .Title }}
                      </a>

                    {{ end }}

                  </div>

                </div>

              {{ end }}

            </footer>

          </div>

        </div>

      </div>

    </article>

  </main>

{{ end }}

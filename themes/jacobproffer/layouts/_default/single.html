{{ define "title" }}
  {{ .Title }} - {{ .Site.Title }}
{{ end }}

{{ define "main" }}

  <main>

    <article class="single bottom-spacing">

      <div class="hero-top-spacing">
        <div class="container gsap-fade-in">
          <div class="single__container">
            <div class="single__content-grid">

              <h1>{{ .Title }}</h1>

            </div>
          </div>
        </div>
      </div>

      {{ partial "single/thumbnail" . }}

      <div class="container gsap-fade-in">

        <div class="single__container">

          <div class="single__content-grid">

            <time
              class="single__posted-time font-14"
              datetime="{{ .PublishDate.Format "2006-01-02" }}"
            >
              {{ .PublishDate.Format "January 2, 2006" }}
            </time>

            {{ .Content }}

            <footer>

              <h2 id="tag-headline">Tags</h2>

              {{ $taxonomy := "tags" }}

                {{ with .Param $taxonomy }}

                  <ul
                    class="unstyled-list flex single__tags-list"
                    role="region"
                    aria-labelledby="tag-headline"
                  >

                    {{ range  $index, $tag := (. | sort) }}

                      {{ with $.Site.GetPage (printf "/%s/%s" $taxonomy $tag) -}}

                        <li>

                          {{ if $index }}
                          ,
                          {{ end }}

                          <a
                            href="{{ .Permalink }}"
                            rel="tag"
                          >

                            {{ $tag | urlize }}

                          </a>

                        </li>

                      {{ end }}

                    {{ end }}

                  </ul>

                {{ end }}

            </footer>

          </div>

        </div>

      </div>

    </article>

  </main>

  {{ $related := .Site.RegularPages.Related . | first 4 }}

  {{ if gt (len $related) 1 }}

    <aside class="related">
      <div class="container">

        {{ $related := .Site.RegularPages.Related . | first 2 }}

        {{ with $related }}

          <h2 class="list__headline gsap-fade-in">Related Posts</h2>

          <ul class="unstyled-list list grid gsap-stagger-in">

            {{ range . }}

              <li class="list__item grid relative">

                {{ .Render "article" }}

              </li>

            {{ end }}

          </ul>

        {{ end }}

      </div>
    </aside>

  {{ end }}

{{ end }}
